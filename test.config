// Test configuration for Nextflow workflow - for development and testing only

// Include the main config
includeConfig 'nextflow.config'

// Override parameters for testing with smaller/mock data
params {
    
    // Use smaller test files if available
    test_mode = true
    
    // Override genome URLs for testing (use smaller files if needed)
    genome {
        // Keep the original URLs for now, but these could be overridden
        // with smaller test files in a real test setup
        fasta = "https://ftp.ncbi.nlm.nih.gov/genomes/all/GCF/000/001/405/GCF_000001405.40_GRCh38.p14/GCF_000001405.40_GRCh38.p14_genomic.fna.gz"
        annotation = "https://ftp.ncbi.nlm.nih.gov/genomes/all/GCF/000/001/405/GCF_000001405.40_GRCh38.p14/GCF_000001405.40_GRCh38.p14_genomic.gtf.gz"
        assembly_report = "https://ftp.ncbi.nlm.nih.gov/genomes/all/GCF/000/001/405/GCF_000001405.40_GRCh38.p14/GCF_000001405.40_GRCh38.p14_assembly_report.txt"
    }
    
    // Use smaller chunk size for testing
    gnomad {
        chunk_size = 1000
    }
    
    // Test output directory
    folders {
        data_dir = "test_data"
        temp_dir = "test_temp"
        output_dir = "test_output"
    }
}

// Process configuration for testing
process {
    
    // Reduce resource requirements for testing
    memory = '1.GB'
    cpus = 1
    time = '30.min'
    
    // Process-specific test configurations
    withName: 'DOWNLOAD_.*' {
        memory = '512.MB'
        time = '10.min'
    }
    
    withName: 'ASSESS_GRC_FIXES' {
        memory = '2.GB'
        time = '30.min'
    }
    
    withName: 'DOWNLOAD_GNOMAD_FREQ' {
        memory = '1.GB'
        time = '1.h'
    }
}

// Test profile
profiles {
    test {
        executor.name = 'local'
        executor.cpus = 2
        executor.memory = '4.GB'
        
        // Disable Docker for basic testing
        docker.enabled = false
        process.container = null
    }
}